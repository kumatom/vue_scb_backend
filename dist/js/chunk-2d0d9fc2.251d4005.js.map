{"version":3,"sources":["webpack:///./src/views/Backend.vue","webpack:///./src/components/Navbar.vue","webpack:///./src/components/Navbar.vue?59c0","webpack:///./src/views/Backend.vue?15bf"],"names":["class","isCheck","customClass","alertClass","content","alertMsg","src","alt","width","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","to","signOut","data","currentPage","inject","methods","api","this","$http","post","then","res","success","$httpMessageState","document","cookie","Date","$router","push","catch","err","errMsg","response","message","console","log","render","components","Navbar","checkLogin","setTimeout","created","token","replace","defaults","headers","common","Authorization"],"mappings":"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","file":"js/chunk-2d0d9fc2.251d4005.js","sourcesContent":["<template>\n  <Navbar />\n  <div v-if=\"isCheck\" class=\"container-fulid\">\n    <div class=\"container\">\n      <router-view />\n    </div>\n  </div>\n  <!-- Alert提示 -->\n  <div class=\"d-flex justify-content-center w-100\">\n    <Alert v-if=\"!isCheck\" :customClass=\"alertClass\" :content=\"alertMsg\" />\n  </div>\n</template>\n\n<script>\n// 導入Navbar\nimport Navbar from '@/components/Navbar.vue';\n\nexport default {\n  components: {\n    Navbar,\n  },\n  data() {\n    return {\n      isCheck: false,\n      alertClass: 'alert-danger',\n      alertMsg: '驗證中，請稍後...',\n    };\n  },\n  inject: ['emitter', '$httpMessageState'],\n  methods: {\n    checkLogin() {\n      const api = `${process.env.VUE_APP_API}/api/user/check`;\n      this.$http\n        .post(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.isCheck = true;\n            this.$router.push('/backend/products');\n          } else {\n            this.isCheck = false;\n            this.alertMsg = '授權無效，請先登入!';\n            this.$httpMessageState(res, '授權');\n            setTimeout(() => {\n              this.$router.push('/');\n            }, 1000);\n          }\n        })\n        .catch((err) => {\n          const errMsg = err.response.data.message;\n          console.log(errMsg);\n        });\n    },\n  },\n  created() {\n    const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    this.$http.defaults.headers.common.Authorization = token;\n    this.checkLogin();\n  },\n};\n</script>\n","<template>\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n    <div class=\"container\">\n      <span class=\"navbar-brand\">\n        <img src=\"https://i.imgur.com/kUYxttR.png\" alt=\"\" width=\"45\" class=\"me-3\">\n        <span>Sugar Cafe Bar 後台管理</span>\n      </span>\n      <button\n        class=\"navbar-toggler\"\n        type=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#navbarText\"\n        aria-controls=\"navbarText\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarText\">\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <router-link class=\"nav-link\" to=\"/backend/products\">產品</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link class=\"nav-link\" to=\"/backend/orders\">訂單</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link class=\"nav-link\" to=\"/backend/coupons\">優惠券</router-link>\n          </li>\n        </ul>\n        <span class=\"navbar-text\">\n          <button class=\"btn btn-secondary\" @click.prevent=\"signOut\">\n            登出\n            <i class=\"bi bi-box-arrow-in-right\"></i>\n          </button>\n        </span>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      currentPage: '',\n    };\n  },\n  inject: ['emitter', '$httpMessageState'],\n  methods: {\n    signOut() {\n      const api = `${process.env.VUE_APP_API}/logout`;\n      this.$http\n        .post(api)\n        .then((res) => {\n          if (res.data.success) {\n            // 清空cookie => Token\n            this.$httpMessageState(res, '登出');\n            document.cookie = `hexToken='';expires=${new Date(-1)}; path=/`;\n            this.$router.push('/');\n          } else {\n            this.$httpMessageState(res, '登出');\n          }\n        })\n        .catch((err) => {\n          const errMsg = err.response.data.message;\n          console.log(errMsg);\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./Navbar.vue?vue&type=template&id=46d9d714\"\nimport script from \"./Navbar.vue?vue&type=script&lang=js\"\nexport * from \"./Navbar.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Backend.vue?vue&type=template&id=d39b32be\"\nimport script from \"./Backend.vue?vue&type=script&lang=js\"\nexport * from \"./Backend.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}